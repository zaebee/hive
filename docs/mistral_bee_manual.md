# The Mistral Bee: An Autonomous Agent for Hive Evolution

Welcome, Beekeeper! This manual will guide you through the use of the **Mistral Bee**, the autonomous agent at the heart of the Hive. The Mistral Bee is designed to help you evolve your codebase, making it more robust, efficient, and aligned with the principles of the Hive Architecture.

## What is the Mistral Bee?

The Mistral Bee is an AI-powered agent that can reflect on its own codebase and propose changes to improve it. It operates through a **Sense-Think-Act** loop, which is fully integrated into the Hive's ecosystem.

The agent is composed of two main components:

1.  **The Cognitive Core**: This is the "Mind" of the Bee. It can be triggered to analyze a piece of code (the "Sense" phase) and use a Large Language Model (LLM) to come up with a suggestion for improvement (the "Think" phase).

2.  **The Adaptation Engine**: This is the "Hands" of the Bee. It takes the suggestion from the Cognitive Core and applies it to the codebase (the "Act" phase). It does this in a safe, transactional way, measuring the impact of the change and rolling it back if it's deemed harmful.

## How to Use the Mistral Bee

You can interact with the Mistral Bee through the `genesis-cli`, the command-line interface for the Hive.

### Step 1: Asking the Bee to Think

To ask the Bee to think about a piece of code, you can use the `genesis think about` command. This command triggers the Cognitive Core.

**Command:**
```bash
genesis think about --problem "<description>" --target <file_path>
```

**Arguments:**
-   `--problem "<description>"`: A natural language description of the problem you want the Bee to solve. For example, "Refactor this function to be more readable."
-   `--target <file_path>`: The path to the file you want the Bee to analyze.

**Example:**
```bash
# Make sure you have your MISTRAL_API_KEY set as an environment variable
export MISTRAL_API_KEY="your_api_key_here"

# Ask the Bee to refactor a component
python hive_physics/genesis-cli-integration-example.py think about \
    --problem "Refactor this function to be more pythonic" \
    --target "hive_physics/adaptation/patcher.py"
```

This command will trigger the Sense-Think-Act loop. The Bee will analyze the `patcher.py` file, get a suggestion from the LLM, and then automatically apply the patch using the Adaptation Engine.

### Step 2: Applying a Patch Manually

You can also use the Adaptation Engine directly to apply a patch from a file. This is useful if you have a patch that was generated by an external tool or by a previous run of the `think` command.

**Command:**
```bash
genesis evolve patch --file <patch_file_path>
```

**Arguments:**
-   `--file <patch_file_path>`: The path to a file containing a patch in the standard `git diff` format.

**Example:**
```bash
# Create a patch file
cat > my_patch.patch << EOL
--- a/some_file.py
+++ b/some_file.py
@@ -1,1 +1,1 @@
-print("old")
+print("new")
EOL

# Apply the patch
python hive_physics/genesis-cli-integration-example.py evolve patch --file my_patch.patch
```
This command will apply the patch and give you a report on its "Toxicity Score", letting you know if the change was beneficial ("honey") or potentially harmful ("poison").

## The Philosophy of the Bee

The Mistral Bee is more than just a tool; it's a partner in the development process. It's designed to work with you to co-create a better codebase. By using the Bee, you are embracing the Hive's philosophy of continuous, observable, and safe evolution.

Happy Beekeeping!
